# FastAPI+SQLArchemy　ウェブアプリケーションサンプル

## 拡張機能のインストール

.vscode/extensions.jsonに記載のVSCode拡張をインストールする。

ポップアップが表示されるので、推奨する拡張機能をインストールされる。

## 依存ライブラリのインストール
pipにコマンドで使用するPythonライブラリをインストールする。

```
pip install -r requirements.txt
```

## 環境変数の設定
設定が必要な環境変数を.envファイルに記載する。

サンプルファイルをコピーして必要な環境変数を設定する。

```
cp .env.example .env
edit .env 
```

## データベーステーブルの作成
alembicコマンドでデータベースファイルおよびテーブルを作成する。（マイグレーション）

```
alembic upgrade head
```

## データベースを確認する
- sqlite3コマンドまたは拡張機能からデータベースに接続する
- sqlite3コマンドまたは拡張機能でテーブル構成などを確認する

## データシーダーで初期データを入力する
- コマンドパレットを起動し、タスク：タスクの実行を選択する
- DataSeedingを選択する
- sqlite3コマンドまたは拡張機能から入力された初期データを確認する

## ウェブアプリケーションを起動する
- コマンドパレットを起動し、タスク：タスクの実行を選択する
- Launchを選択する
- 表示されたURLに接続する

※ウェブアプリケーションを終了するには起動したターミナルでCtrl+Cを押下する。

## OpenAPIドキュメントを確認する
- ブラウザから/docsにアクセスする
- OpenAPI形式のREST API仕様が表示されるのを確認する
- 実際にリクエストを送信してみる

## HTTPクライアントからリクエストを送信する
- 拡張機能にtool/postman_collection.jsonを読み込む
- 拡張機能からリクエストを送信しレスポンスを確認する

## SQLでデータを入力する
- sqlite3コマンドまたは拡張機能からSQL文でデータを入力する
- sqlite3コマンドまたは拡張機能で入力されたデータを確認する

## ウェブアプリケーションをデバッグする
- コマンドパレットを起動し、タスク：タスクの実行を選択する
- Launch-Debugを選択する
- デバッグより、デバッグ(アタッチ)を選択する
- エンドポイントのコードにブレイクポイントを貼ってリクエストを送信してみる
- プログラムが停止することを確認する

※ウェブアプリケーションのデバッグを終了するには起動したターミナルでCtrl+Cを押下する。

## ORMのクエリーを確認する

## Webアプリケーションのログ出力を確認する