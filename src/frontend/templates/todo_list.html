<!--
概要（処理の流れ）:
- テーブル形式で TODO を一覧表示し、状態（未完了/完了）やタグでフィルタリングできる画面。
- ページ読み込み時に todo_list.js がデータを取得してテーブルと統計情報を描画する。
- フィルタ変更時はクライアント側でフィルタリングして表示を更新、必要なら API にクエリを投げる実装へ拡張可能。
-->
{% extends "base.html" %}

{% block title %}TODOリスト - TODO App{% endblock %}

{% block extra_css %}
<!-- TODOリスト専用CSS -->
<link rel="stylesheet" href="{{ url_for('static', path='/css/todo_list.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>📊 TODOリスト</h1>

    <!-- フィルター機能 -->
    <div class="filter-section">
        <div class="filter-group">
            <label>状態:</label>
            <select id="statusFilter">
                <option value="all">すべて</option>
                <option value="active">未完了のみ</option>
                <option value="completed">完了済みのみ</option>
            </select>
        </div>
        <div class="filter-group">
            <label>タグ:</label>
            <select id="tagFilter">
                <option value="all">すべて</option>
                <!-- タグがここに追加されます（todo_list.js が描画） -->
            </select>
        </div>
    </div>

    <!-- テーブル表示 -->
    <div class="table-wrapper">
        <table class="todo-table">
            <thead>
                <tr>
                    <th style="width: 50px;">完了</th>
                    <th style="width: auto;">内容</th>
                    <th style="width: 200px;">タグ</th>
                    <th style="width: 150px;">作成日時</th>
                </tr>
            </thead>
            <tbody id="todoTableBody">
                <!-- テーブル行がここに表示されます -->
            </tbody>
        </table>
    </div>

    <!-- 統計情報（描画の流れ）:
         - データ取得後に total/active/completed を計算して表示。
         - 完了率は簡易計算（completed/total）。
    -->
    <div class="stats-section">
        <div class="stat-card">
            <div class="stat-label">全TODO</div>
            <div class="stat-value" id="totalCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">未完了</div>
            <div class="stat-value" id="activeCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">完了済み</div>
            <div class="stat-value" id="completedCount">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">完了率</div>
            <div class="stat-value" id="completionRate">0%</div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', path='/js/todo_list.js') }}"></script>
{% endblock %}